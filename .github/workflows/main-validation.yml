name: Validation des pushes vers main

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout du code
      uses: actions/checkout@v4
      
    - name: Configuration Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: VÃ©rification des fichiers
      run: |
        echo "âœ… Push vers main autorisÃ© et validÃ©"
        echo "ğŸ“‚ Contenu du repository:"
        ls -la
        echo ""
        echo "ğŸ“‹ Structure des fichiers:"
        find . -type f -name "*.md" -o -name "*.json" -o -name "*.js" | head -20
        
    - name: Validation de la structure
      run: |
        echo "ğŸ” Validation de la structure du projet..."
        
        # VÃ©rifier que les fichiers essentiels existent
        if [ -f "README.md" ]; then
          echo "âœ… README.md prÃ©sent"
        else
          echo "âŒ README.md manquant"
          exit 1
        fi
        
        if [ -f "CONTRIBUTING.md" ]; then
          echo "âœ… CONTRIBUTING.md prÃ©sent"
        else
          echo "âŒ CONTRIBUTING.md manquant"
          exit 1
        fi
        
    - name: Message de succÃ¨s
      run: |
        echo "ğŸ‰ Push vers main rÃ©ussi !"
        echo "âœ¨ Le repository est prÃªt pour les contributions"
        echo "ğŸš€ Tu peux push dans le main !"