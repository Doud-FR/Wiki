"use strict";(self["webpackChunkwiki_frontend"]=self["webpackChunkwiki_frontend"]||[]).push([[396],{4396:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var r=a(641),l=a(3751);const o={class:"d-flex flex-column align-center"},t={class:"text-center"};function n(e,s,a,n,i,d){const u=(0,r.g2)("v-icon"),c=(0,r.g2)("v-card-title"),m=(0,r.g2)("v-text-field"),p=(0,r.g2)("v-checkbox"),g=(0,r.g2)("v-col"),b=(0,r.g2)("v-btn"),v=(0,r.g2)("v-row"),f=(0,r.g2)("v-form"),k=(0,r.g2)("v-card-text"),h=(0,r.g2)("v-card"),w=(0,r.g2)("v-container");return(0,r.uX)(),(0,r.Wv)(w,{fluid:"",class:"fill-height login-container"},{default:(0,r.k6)(()=>[(0,r.bF)(v,{justify:"center",align:"center",class:"fill-height"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{cols:"12",sm:"8",md:"6",lg:"4"},{default:(0,r.k6)(()=>[(0,r.bF)(h,{class:"elevation-8",rounded:"lg"},{default:(0,r.k6)(()=>[(0,r.bF)(c,{class:"text-center py-6"},{default:(0,r.k6)(()=>[(0,r.Lk)("div",o,[(0,r.bF)(u,{size:"48",color:"primary",class:"mb-4"},{default:(0,r.k6)(()=>[...s[5]||(s[5]=[(0,r.eW)("mdi-book-open-page-variant",-1)])]),_:1}),s[6]||(s[6]=(0,r.Lk)("h1",{class:"text-h4 font-weight-light"},"Wiki App",-1)),s[7]||(s[7]=(0,r.Lk)("p",{class:"text-subtitle-1 text-grey"},"Connexion à votre compte",-1))])]),_:1}),(0,r.bF)(k,{class:"px-8 pb-8"},{default:(0,r.k6)(()=>[(0,r.bF)(f,{ref:"form",onSubmit:(0,l.D$)(n.handleLogin,["prevent"])},{default:(0,r.k6)(()=>[(0,r.bF)(m,{modelValue:n.email,"onUpdate:modelValue":s[0]||(s[0]=e=>n.email=e),label:"Adresse email",type:"email","prepend-inner-icon":"mdi-email",variant:"outlined",rules:n.emailRules,"error-messages":n.emailErrors,class:"mb-3",required:""},null,8,["modelValue","rules","error-messages"]),(0,r.bF)(m,{modelValue:n.password,"onUpdate:modelValue":s[1]||(s[1]=e=>n.password=e),label:"Mot de passe",type:n.showPassword?"text":"password","prepend-inner-icon":"mdi-lock","append-inner-icon":n.showPassword?"mdi-eye":"mdi-eye-off","onClick:appendInner":s[2]||(s[2]=e=>n.showPassword=!n.showPassword),variant:"outlined",rules:n.passwordRules,"error-messages":n.passwordErrors,class:"mb-3",required:""},null,8,["modelValue","type","append-inner-icon","rules","error-messages"]),(0,r.bF)(v,{class:"mb-4"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{cols:"6"},{default:(0,r.k6)(()=>[(0,r.bF)(p,{modelValue:n.rememberMe,"onUpdate:modelValue":s[3]||(s[3]=e=>n.rememberMe=e),label:"Se souvenir de moi",density:"compact"},null,8,["modelValue"])]),_:1}),(0,r.bF)(g,{cols:"6",class:"text-right"},{default:(0,r.k6)(()=>[(0,r.bF)(b,{text:"",size:"small",color:"primary"},{default:(0,r.k6)(()=>[...s[8]||(s[8]=[(0,r.eW)(" Mot de passe oublié ? ",-1)])]),_:1})]),_:1})]),_:1}),(0,r.bF)(b,{type:"submit",color:"primary",size:"large",block:"",loading:n.loading,class:"mb-4"},{default:(0,r.k6)(()=>[...s[9]||(s[9]=[(0,r.eW)(" Se connecter ",-1)])]),_:1},8,["loading"]),(0,r.Lk)("div",t,[s[11]||(s[11]=(0,r.Lk)("span",{class:"text-grey"},"Pas encore de compte ?",-1)),(0,r.bF)(b,{text:"",color:"primary",onClick:s[4]||(s[4]=s=>e.$router.push("/register"))},{default:(0,r.k6)(()=>[...s[10]||(s[10]=[(0,r.eW)(" Créer un compte ",-1)])]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}var i=a(953),d=a(5220),u=a(975),c=a(5246);const m={name:"Login",setup(){const e=(0,d.rd)(),s=(0,u.n)(),a=(0,c.dj)(),r=(0,i.KR)(null),l=(0,i.KR)(""),o=(0,i.KR)(""),t=(0,i.KR)(!1),n=(0,i.KR)(!1),m=(0,i.KR)(!1),p=(0,i.KR)([]),g=(0,i.KR)([]),b=[e=>!!e||"L'email est requis",e=>/.+@.+\..+/.test(e)||"L'email doit être valide"],v=[e=>!!e||"Le mot de passe est requis",e=>e&&e.length>=6||"Le mot de passe doit contenir au moins 6 caractères"],f=async()=>{p.value=[],g.value=[];const{valid:t}=await r.value.validate();if(t){m.value=!0;try{await s.login(l.value,o.value),a.success("Connexion réussie ! Bienvenue."),e.push("/")}catch(n){console.error("Login error:",n),n.response?.data?.errors?n.response.data.errors.forEach(e=>{"email"===e.path?p.value.push(e.msg):"password"===e.path&&g.value.push(e.msg)}):a.error(n.response?.data?.error||"Erreur de connexion")}finally{m.value=!1}}};return{form:r,email:l,password:o,showPassword:t,rememberMe:n,loading:m,emailErrors:p,passwordErrors:g,emailRules:b,passwordRules:v,handleLogin:f}}};var p=a(6262);const g=(0,p.A)(m,[["render",n],["__scopeId","data-v-84b7148c"]]),b=g}}]);
//# sourceMappingURL=396.8acda695.js.map