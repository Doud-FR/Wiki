(()=>{"use strict";var e={975:(e,t,n)=>{n.d(t,{n:()=>c});var r=n(5615),a=n(4335);const o={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"http://localhost:3000/api",i=a.A.create({baseURL:o,timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)));const s=i,u={async login(e,t){const n=await s.post("/auth/login",{email:e,password:t});return n.data.token&&(localStorage.setItem("auth_token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user))),n.data},async register(e){const t=await s.post("/auth/register",e);return t.data.token&&(localStorage.setItem("auth_token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data},async getProfile(){const e=await s.get("/auth/me");return e.data.user},async updateProfile(e){const t=await s.put("/auth/profile",e);return localStorage.setItem("user",JSON.stringify(t.data.user)),t.data},async changePassword(e,t){const n=await s.put("/auth/password",{currentPassword:e,newPassword:t});return n.data},logout(){localStorage.removeItem("auth_token"),localStorage.removeItem("user")},isAuthenticated(){return!!localStorage.getItem("auth_token")},getCurrentUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null}},l=u,c=(0,r.nY)("auth",{state:()=>({user:null,token:null,isAuthenticated:!1,loading:!1}),getters:{isAdmin:e=>e.user?.isAdmin||!1,fullName:e=>e.user?`${e.user.firstName} ${e.user.lastName}`:""},actions:{async login(e,t){this.loading=!0;try{const n=await l.login(e,t);return this.user=n.user,this.token=n.token,this.isAuthenticated=!0,n}catch(n){throw this.logout(),n}finally{this.loading=!1}},async register(e){this.loading=!0;try{const t=await l.register(e);return this.user=t.user,this.token=t.token,this.isAuthenticated=!0,t}catch(t){throw this.logout(),t}finally{this.loading=!1}},async updateProfile(e){return await l.updateProfile(e)},async changePassword(e,t){return await l.changePassword(e,t)},logout(){l.logout(),this.user=null,this.token=null,this.isAuthenticated=!1},initializeAuth(){const e=localStorage.getItem("auth_token"),t=localStorage.getItem("user");e&&t&&(this.token=e,this.user=JSON.parse(t),this.isAuthenticated=!0)},async refreshProfile(){if(this.isAuthenticated)try{this.user=await l.getProfile(),localStorage.setItem("user",JSON.stringify(this.user))}catch(e){throw this.logout(),e}}}})},4695:(e,t,n)=>{var r=n(3751),a=n(5615),o=n(641);function i(e,t,n,r,a,i){const s=(0,o.g2)("AppNavigation"),u=(0,o.g2)("router-view"),l=(0,o.g2)("v-main"),c=(0,o.g2)("AppFooter"),d=(0,o.g2)("v-app");return(0,o.uX)(),(0,o.Wv)(d,null,{default:(0,o.k6)(()=>[r.showNavigation?((0,o.uX)(),(0,o.Wv)(s,{key:0})):(0,o.Q3)("",!0),(0,o.bF)(l,null,{default:(0,o.k6)(()=>[(0,o.bF)(u)]),_:1}),r.showNavigation?((0,o.uX)(),(0,o.Wv)(c,{key:1})):(0,o.Q3)("",!0)]),_:1})}var s=n(5220),u=n(975),l=n(33);const c={class:"text-h6"};function d(e,t,n,a,i,s){const u=(0,o.g2)("v-app-bar-nav-icon"),d=(0,o.g2)("v-icon"),m=(0,o.g2)("v-toolbar-title"),h=(0,o.g2)("v-spacer"),p=(0,o.g2)("v-text-field"),g=(0,o.g2)("v-avatar"),f=(0,o.g2)("v-btn"),v=(0,o.g2)("v-list-item-title"),b=(0,o.g2)("v-list-item-subtitle"),k=(0,o.g2)("v-list-item"),y=(0,o.g2)("v-divider"),F=(0,o.g2)("v-list"),w=(0,o.g2)("v-menu"),A=(0,o.g2)("v-list-subheader"),_=(0,o.g2)("v-navigation-drawer"),S=(0,o.g2)("v-app-bar");return(0,o.uX)(),(0,o.Wv)(S,{color:"primary",dark:"",prominent:""},{default:(0,o.k6)(()=>[(0,o.bF)(u,{onClick:t[0]||(t[0]=e=>a.drawer=!a.drawer)}),(0,o.bF)(m,{class:"d-flex align-center"},{default:(0,o.k6)(()=>[(0,o.bF)(d,{class:"mr-2"},{default:(0,o.k6)(()=>[...t[7]||(t[7]=[(0,o.eW)("mdi-book-open-page-variant",-1)])]),_:1}),t[8]||(t[8]=(0,o.eW)(" Wiki App ",-1))]),_:1}),(0,o.bF)(h),(0,o.bF)(p,{modelValue:a.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>a.searchQuery=e),"hide-details":"","single-line":"",placeholder:"Rechercher...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",class:"mr-4",style:{"max-width":"300px"},onKeyup:(0,r.jR)(a.performSearch,["enter"])},null,8,["modelValue","onKeyup"]),(0,o.bF)(w,null,{activator:(0,o.k6)(({props:e})=>[(0,o.bF)(f,(0,o.v6)(e,{icon:""}),{default:(0,o.k6)(()=>[(0,o.bF)(g,{size:"32"},{default:(0,o.k6)(()=>[(0,o.Lk)("span",c,(0,l.v_)(a.userInitials),1)]),_:1})]),_:2},1040)]),default:(0,o.k6)(()=>[(0,o.bF)(F,null,{default:(0,o.k6)(()=>[(0,o.bF)(k,{"prepend-icon":"mdi-account"},{default:(0,o.k6)(()=>[(0,o.bF)(v,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(a.authStore.fullName),1)]),_:1}),(0,o.bF)(b,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(a.authStore.user?.email),1)]),_:1})]),_:1}),(0,o.bF)(y),(0,o.bF)(k,{onClick:t[2]||(t[2]=t=>e.$router.push("/profile")),"prepend-icon":"mdi-account-edit"},{default:(0,o.k6)(()=>[(0,o.bF)(v,null,{default:(0,o.k6)(()=>[...t[9]||(t[9]=[(0,o.eW)("Profil",-1)])]),_:1})]),_:1}),a.authStore.isAdmin?((0,o.uX)(),(0,o.Wv)(k,{key:0,onClick:t[3]||(t[3]=t=>e.$router.push("/admin")),"prepend-icon":"mdi-cog"},{default:(0,o.k6)(()=>[(0,o.bF)(v,null,{default:(0,o.k6)(()=>[...t[10]||(t[10]=[(0,o.eW)("Administration",-1)])]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)(y),(0,o.bF)(k,{onClick:a.logout,"prepend-icon":"mdi-logout"},{default:(0,o.k6)(()=>[(0,o.bF)(v,null,{default:(0,o.k6)(()=>[...t[11]||(t[11]=[(0,o.eW)("Déconnexion",-1)])]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}),(0,o.bF)(_,{modelValue:a.drawer,"onUpdate:modelValue":t[6]||(t[6]=e=>a.drawer=e),temporary:""},{default:(0,o.k6)(()=>[(0,o.bF)(F,{density:"compact",nav:""},{default:(0,o.k6)(()=>[(0,o.bF)(k,{"prepend-icon":"mdi-home",title:"Accueil",value:"home",onClick:t[4]||(t[4]=t=>e.$router.push("/"))}),(0,o.bF)(k,{"prepend-icon":"mdi-file-document-multiple",title:"Documents",value:"documents",onClick:t[5]||(t[5]=t=>e.$router.push("/documents"))}),(0,o.bF)(y,{class:"my-2"}),(0,o.bF)(A,null,{default:(0,o.k6)(()=>[...t[12]||(t[12]=[(0,o.eW)("DOSSIERS",-1)])]),_:1}),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.recentFolders,e=>((0,o.uX)(),(0,o.Wv)(k,{key:e.id,"prepend-icon":"mdi-folder",title:e.name,onClick:t=>a.navigateToFolder(e)},null,8,["title","onClick"]))),128)),(0,o.bF)(y,{class:"my-2"}),(0,o.bF)(k,{"prepend-icon":"mdi-plus",title:"Nouveau document",onClick:a.createNewDocument},null,8,["onClick"]),(0,o.bF)(k,{"prepend-icon":"mdi-folder-plus",title:"Nouveau dossier",onClick:a.createNewFolder},null,8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var m=n(953),h=n(5246);const p={name:"AppNavigation",setup(){const e=(0,s.rd)(),t=(0,u.n)(),n=(0,h.dj)(),r=(0,m.KR)(!1),a=(0,m.KR)(""),i=(0,m.KR)([{id:1,name:"Documentation",path:"/docs"},{id:2,name:"Projets",path:"/projects"},{id:3,name:"Guides",path:"/guides"}]),l=(0,o.EW)(()=>{if(!t.user)return"?";const e=t.user.firstName?.[0]||"",n=t.user.lastName?.[0]||"";return(e+n).toUpperCase()}),c=()=>{a.value.trim()&&(e.push({name:"Documents",query:{search:a.value.trim()}}),r.value=!1)},d=t=>{e.push({name:"Documents",query:{folder:t.id}}),r.value=!1},p=()=>{e.push("/documents/new"),r.value=!1},g=()=>{n.info("Fonctionnalité en cours de développement"),r.value=!1},f=async()=>{try{t.logout(),n.success("Déconnexion réussie"),e.push("/login")}catch(r){n.error("Erreur lors de la déconnexion")}};return{drawer:r,searchQuery:a,recentFolders:i,userInitials:l,authStore:t,performSearch:c,navigateToFolder:d,createNewDocument:p,createNewFolder:g,logout:f}}};var g=n(6262);const f=(0,g.A)(p,[["render",d]]),v=f,b={class:"d-flex justify-space-between align-center w-100 px-4"},k={class:"d-flex align-center"};function y(e,t,n,r,a,i){const s=(0,o.g2)("v-icon"),u=(0,o.g2)("v-btn"),c=(0,o.g2)("v-footer");return(0,o.uX)(),(0,o.Wv)(c,{color:"grey-lighten-4",class:"mt-auto"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",b,[t[1]||(t[1]=(0,o.Lk)("div",{class:"text-caption"}," © 2024 Wiki App - Documentation Collaborative ",-1)),(0,o.Lk)("div",k,[(0,o.bF)(u,{icon:"",size:"small",href:"https://github.com",target:"_blank",class:"mr-2"},{default:(0,o.k6)(()=>[(0,o.bF)(s,null,{default:(0,o.k6)(()=>[...t[0]||(t[0]=[(0,o.eW)("mdi-github",-1)])]),_:1})]),_:1}),(0,o.bF)(u,{icon:"",size:"small",onClick:r.toggleTheme},{default:(0,o.k6)(()=>[(0,o.bF)(s,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(r.isDark?"mdi-weather-sunny":"mdi-weather-night"),1)]),_:1})]),_:1},8,["onClick"])])])]),_:1})}var F=n(1122);const w={name:"AppFooter",setup(){const e=(0,F.DP)(),t=(0,o.EW)(()=>"dark"===e.global.name.value),n=()=>{e.global.name.value=e.global.current.value.dark?"light":"dark"};return{isDark:t,toggleTheme:n}}},A=(0,g.A)(w,[["render",y]]),_=A,S={name:"App",components:{AppNavigation:v,AppFooter:_},setup(){const e=(0,s.lq)(),t=(0,u.n)();t.initializeAuth();const n=(0,o.EW)(()=>{const n=["Login","Register"];return t.isAuthenticated&&!n.includes(e.name)});return{showNavigation:n}}},C=(0,g.A)(S,[["render",i]]),N=C,E=[{path:"/",name:"Home",component:()=>n.e(939).then(n.bind(n,4939)),meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:()=>n.e(396).then(n.bind(n,4396)),meta:{guest:!0}},{path:"/register",name:"Register",component:()=>n.e(786).then(n.bind(n,8786)),meta:{guest:!0}},{path:"/profile",name:"Profile",component:()=>n.e(600).then(n.bind(n,4600)),meta:{requiresAuth:!0}},{path:"/documents",name:"Documents",component:()=>n.e(131).then(n.bind(n,131)),meta:{requiresAuth:!0}},{path:"/document/:id",name:"DocumentView",component:()=>n.e(896).then(n.bind(n,2896)),meta:{requiresAuth:!0}},{path:"/document/:id/edit",name:"DocumentEdit",component:()=>n.e(535).then(n.bind(n,2535)),meta:{requiresAuth:!0}},{path:"/admin",name:"Admin",component:()=>n.e(695).then(n.bind(n,3695)),meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>n.e(473).then(n.bind(n,1473))}],P=(0,s.aE)({history:(0,s.LA)(),routes:E});P.beforeEach((e,t,n)=>{const r=(0,u.n)();!r.isAuthenticated&&localStorage.getItem("auth_token")&&r.initializeAuth(),!e.meta.requiresAuth||r.isAuthenticated?!e.meta.requiresAdmin||r.isAdmin?e.meta.guest&&r.isAuthenticated?n("/"):n():n("/"):n("/login")});const O=P;var I=n(5850),W=n(376),j=n(1357),D=n(87);n(5524);const x=(0,I.$N)({components:W,directives:j,icons:{defaultSet:"mdi",aliases:D.z,sets:{mdi:D.r}},theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FF9800",background:"#FAFAFA",surface:"#FFFFFF"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00",background:"#121212",surface:"#212121"}}}}});n(7917);const T=(0,r.Ef)(N);T.use((0,a.Ey)()),T.use(O),T.use(x),T.use(h.Ay,{transition:"Vue-Toastification__bounce",maxToasts:20,newestOnTop:!0}),T.mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,(()=>{var e=[];n.O=(t,r,a,o)=>{if(!r){var i=1/0;for(c=0;c<e.length;c++){for(var[r,a,o]=e[c],s=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every(e=>n.O[e](r[u]))?r.splice(u--,1):(s=!1,o<i&&(i=o));if(s){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[]))})(),(()=>{n.u=e=>"js/"+e+"."+{131:"4afaf839",396:"8acda695",473:"815f5d1e",535:"ef2bb282",600:"8cd89561",695:"f1a44f62",786:"8fac1b9f",896:"48f74064",939:"cc774e22"}[e]+".js"})(),(()=>{n.miniCssF=e=>"css/"+e+"."+{396:"8b498a94",786:"c161e716",939:"911e0f83"}[e]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="wiki-frontend:";n.l=(r,a,o,i)=>{if(e[r])e[r].push(a);else{var s,u;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[a];var m=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach(e=>e(n)),t)return t(n)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),u&&document.head.appendChild(s)}}})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,r,a,o)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",n.nc&&(i.nonce=n.nc);var s=n=>{if(i.onerror=i.onload=null,"load"===n.type)a();else{var r=n&&n.type,s=n&&n.target&&n.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+s+")");u.name="ChunkLoadError",u.code="CSS_CHUNK_LOAD_FAILED",u.type=r,u.request=s,i.parentNode&&i.parentNode.removeChild(i),o(u)}};return i.onerror=i.onload=s,i.href=t,r?r.parentNode.insertBefore(i,r.nextSibling):document.head.appendChild(i),i},t=(e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=n[r],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){a=i[r],o=a.getAttribute("data-href");if(o===e||o===t)return a}},r=r=>new Promise((a,o)=>{var i=n.miniCssF(r),s=n.p+i;if(t(i,s))return a();e(r,s,null,a,o)}),a={524:0};n.f.miniCss=(e,t)=>{var n={396:1,786:1,939:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=r(e).then(()=>{a[e]=0},t=>{throw delete a[e],t}))}}})(),(()=>{var e={524:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=o);var i=n.p+n.u(t),s=new Error,u=r=>{if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}};n.l(i,u,"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[i,s,u]=r,l=0;if(i.some(t=>0!==e[t])){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var c=u(n)}for(t&&t(r);l<i.length;l++)o=i[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunkwiki_frontend"]=self["webpackChunkwiki_frontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[504],()=>n(4695));r=n.O(r)})();
//# sourceMappingURL=app.ba96cd6c.js.map